<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="Assignments">
    <link rel="apple-touch-icon" href="assignment_graphic.jpg">
    <link rel="icon" type="image/jpeg" href="assignment_graphic.jpg">
    <title>Assignment Tracker</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
</head>
<body>
    <div id="root"></div>
    
    <script type="text/babel">
        const { useState, useEffect } = React;
        
        // Lucide icons as inline SVGs
        const Plus = () => (
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <line x1="12" y1="5" x2="12" y2="19"></line>
                <line x1="5" y1="12" x2="19" y2="12"></line>
            </svg>
        );
        
        const X = () => (
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <line x1="18" y1="6" x2="6" y2="18"></line>
                <line x1="6" y1="6" x2="18" y2="18"></line>
            </svg>
        );
        
        const Edit2 = () => (
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <path d="M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"></path>
            </svg>
        );
        
        const Trash2 = () => (
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <polyline points="3 6 5 6 21 6"></polyline>
                <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
                <line x1="10" y1="11" x2="10" y2="17"></line>
                <line x1="14" y1="11" x2="14" y2="17"></line>
            </svg>
        );
        
        const Check = () => (
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <polyline points="20 6 9 17 4 12"></polyline>
            </svg>
        );
        
        const Bell = () => (
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path>
                <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>
            </svg>
        );
        
        const Filter = () => (
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <polygon points="22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"></polygon>
            </svg>
        );

        function HomeworkTracker() {
            const [assignments, setAssignments] = useState([]);
            const [showAddForm, setShowAddForm] = useState(false);
            const [editingId, setEditingId] = useState(null);
            const [filterClass, setFilterClass] = useState('all');
            const [filterStatus, setFilterStatus] = useState('all');
            
            const [formData, setFormData] = useState({
                name: '',
                class: '',
                dueDate: '',
                completed: false,
                reminderEnabled: false,
                reminderTime: '09:00'
            });

            useEffect(() => {
                loadData();
            }, []);

            useEffect(() => {
                saveData();
            }, [assignments]);

            const loadData = () => {
                try {
                    const saved = localStorage.getItem('homework-assignments');
                    if (saved) {
                        setAssignments(JSON.parse(saved));
                    }
                } catch (error) {
                    console.log('No saved data found');
                }
            };

            const saveData = () => {
                if (assignments.length >= 0) {
                    try {
                        localStorage.setItem('homework-assignments', JSON.stringify(assignments));
                    } catch (error) {
                        console.error('Error saving data:', error);
                    }
                }
            };

            const handleSubmit = () => {
                if (!formData.name || !formData.class || !formData.dueDate) {
                    alert('Please fill in all required fields');
                    return;
                }
                
                if (editingId) {
                    setAssignments(assignments.map(a => 
                        a.id === editingId ? { ...formData, id: editingId } : a
                    ));
                    setEditingId(null);
                } else {
                    const newAssignment = {
                        ...formData,
                        id: Date.now().toString()
                    };
                    setAssignments([...assignments, newAssignment]);
                }
                
                resetForm();
            };

            const resetForm = () => {
                setFormData({
                    name: '',
                    class: '',
                    dueDate: '',
                    completed: false,
                    reminderEnabled: false,
                    reminderTime: '09:00'
                });
                setShowAddForm(false);
                setEditingId(null);
            };

            const handleEdit = (assignment) => {
                setFormData(assignment);
                setEditingId(assignment.id);
                setShowAddForm(true);
            };

            const handleDelete = (id) => {
                if (confirm('Are you sure you want to delete this assignment?')) {
                    setAssignments(assignments.filter(a => a.id !== id));
                }
            };

            const toggleCompleted = (id) => {
                setAssignments(assignments.map(a =>
                    a.id === id ? { ...a, completed: !a.completed } : a
                ));
            };

            const getUniqueClasses = () => {
                return [...new Set(assignments.map(a => a.class))].filter(Boolean);
            };

            const getFilteredAndSortedAssignments = () => {
                let filtered = [...assignments];

                if (filterClass !== 'all') {
                    filtered = filtered.filter(a => a.class === filterClass);
                }

                if (filterStatus === 'completed') {
                    filtered = filtered.filter(a => a.completed);
                } else if (filterStatus === 'incomplete') {
                    filtered = filtered.filter(a => !a.completed);
                }

                filtered.sort((a, b) => {
                    return new Date(a.dueDate) - new Date(b.dueDate);
                });

                return filtered;
            };

            const formatDate = (dateString) => {
                const date = new Date(dateString);
                return date.toLocaleDateString('en-US', { 
                    month: 'short', 
                    day: 'numeric', 
                    year: 'numeric' 
                });
            };

            const getDaysUntil = (dateString) => {
                const due = new Date(dateString);
                const today = new Date();
                today.setHours(0, 0, 0, 0);
                due.setHours(0, 0, 0, 0);
                const days = Math.ceil((due - today) / (1000 * 60 * 60 * 24));
                
                if (days < 0) return 'Overdue';
                if (days === 0) return 'Due today';
                if (days === 1) return 'Due tomorrow';
                return `${days} days left`;
            };

            const filteredAssignments = getFilteredAndSortedAssignments();

            return (
                <div className="min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-4">
                    <div className="max-w-4xl mx-auto">
                        <div className="bg-white rounded-lg shadow-lg p-6 mb-6">
                            <div className="flex justify-between items-center mb-6">
                                <h1 className="text-3xl font-bold text-gray-800">Assignment Tracker</h1>
                                <button
                                    onClick={() => {
                                        if (showAddForm) {
                                            resetForm();
                                        } else {
                                            setShowAddForm(true);
                                        }
                                    }}
                                    className="bg-indigo-600 text-white px-4 py-2 rounded-lg flex items-center gap-2 hover:bg-indigo-700 transition"
                                >
                                    {showAddForm ? <X /> : <Plus />}
                                    {showAddForm ? 'Cancel' : 'Add Assignment'}
                                </button>
                            </div>

                            {showAddForm && (
                                <div className="bg-gray-50 p-4 rounded-lg mb-6">
                                    <div className="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                                        <div>
                                            <label className="block text-sm font-medium text-gray-700 mb-1">
                                                Assignment Name *
                                            </label>
                                            <input
                                                type="text"
                                                value={formData.name}
                                                onChange={(e) => setFormData({ ...formData, name: e.target.value })}
                                                className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"
                                                placeholder="e.g., Essay on Renaissance Art"
                                            />
                                        </div>
                                        <div>
                                            <label className="block text-sm font-medium text-gray-700 mb-1">
                                                Class *
                                            </label>
                                            <input
                                                type="text"
                                                value={formData.class}
                                                onChange={(e) => setFormData({ ...formData, class: e.target.value })}
                                                className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"
                                                placeholder="e.g., History 101"
                                            />
                                        </div>
                                        <div>
                                            <label className="block text-sm font-medium text-gray-700 mb-1">
                                                Due Date *
                                            </label>
                                            <input
                                                type="date"
                                                value={formData.dueDate}
                                                onChange={(e) => setFormData({ ...formData, dueDate: e.target.value })}
                                                className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"
                                            />
                                        </div>
                                        <div>
                                            <label className="block text-sm font-medium text-gray-700 mb-1">
                                                Reminder Time
                                            </label>
                                            <div className="flex items-center gap-2">
                                                <input
                                                    type="checkbox"
                                                    checked={formData.reminderEnabled}
                                                    onChange={(e) => setFormData({ ...formData, reminderEnabled: e.target.checked })}
                                                    className="w-4 h-4 text-indigo-600"
                                                />
                                                <input
                                                    type="time"
                                                    value={formData.reminderTime}
                                                    onChange={(e) => setFormData({ ...formData, reminderTime: e.target.value })}
                                                    disabled={!formData.reminderEnabled}
                                                    className="flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent disabled:bg-gray-100"
                                                />
                                            </div>
                                        </div>
                                    </div>
                                    <button
                                        onClick={handleSubmit}
                                        className="w-full bg-indigo-600 text-white py-2 rounded-lg hover:bg-indigo-700 transition font-medium"
                                    >
                                        {editingId ? 'Update Assignment' : 'Add Assignment'}
                                    </button>
                                </div>
                            )}

                            <div className="flex flex-wrap gap-4 mb-6 items-center">
                                <div className="flex items-center gap-2">
                                    <Filter />
                                    <select
                                        value={filterClass}
                                        onChange={(e) => setFilterClass(e.target.value)}
                                        className="px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500"
                                    >
                                        <option value="all">All Classes</option>
                                        {getUniqueClasses().map(cls => (
                                            <option key={cls} value={cls}>{cls}</option>
                                        ))}
                                    </select>
                                </div>
                                <select
                                    value={filterStatus}
                                    onChange={(e) => setFilterStatus(e.target.value)}
                                    className="px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500"
                                >
                                    <option value="all">All Status</option>
                                    <option value="incomplete">Incomplete</option>
                                    <option value="completed">Completed</option>
                                </select>
                            </div>
                        </div>

                        <div className="space-y-4">
                            {filteredAssignments.length === 0 ? (
                                <div className="bg-white rounded-lg shadow p-8 text-center text-gray-500">
                                    {assignments.length === 0 
                                        ? "No assignments yet. Click 'Add Assignment' to get started!"
                                        : "No assignments match your filters."}
                                </div>
                            ) : (
                                filteredAssignments.map(assignment => (
                                    <div
                                        key={assignment.id}
                                        className={`bg-white rounded-lg shadow p-4 transition ${
                                            assignment.completed ? 'opacity-60' : ''
                                        }`}
                                    >
                                        <div className="flex items-start justify-between">
                                            <div className="flex-1">
                                                <div className="flex items-center gap-3 mb-2">
                                                    <button
                                                        onClick={() => toggleCompleted(assignment.id)}
                                                        className={`w-6 h-6 rounded-full border-2 flex items-center justify-center transition ${
                                                            assignment.completed
                                                                ? 'bg-green-500 border-green-500'
                                                                : 'border-gray-300 hover:border-indigo-500'
                                                        }`}
                                                    >
                                                        {assignment.completed && <Check />}
                                                    </button>
                                                    <h3 className={`text-lg font-semibold ${
                                                        assignment.completed ? 'line-through text-gray-500' : 'text-gray-800'
                                                    }`}>
                                                        {assignment.name}
                                                    </h3>
                                                </div>
                                                <div className="ml-9 space-y-1">
                                                    <p className="text-sm text-gray-600">
                                                        <span className="font-medium">Class:</span> {assignment.class}
                                                    </p>
                                                    <p className="text-sm text-gray-600">
                                                        <span className="font-medium">Due:</span> {formatDate(assignment.dueDate)}
                                                        <span className={`ml-2 px-2 py-1 rounded text-xs font-medium ${
                                                            getDaysUntil(assignment.dueDate) === 'Overdue'
                                                                ? 'bg-red-100 text-red-700'
                                                                : getDaysUntil(assignment.dueDate) === 'Due today'
                                                                ? 'bg-orange-100 text-orange-700'
                                                                : 'bg-blue-100 text-blue-700'
                                                        }`}>
                                                            {getDaysUntil(assignment.dueDate)}
                                                        </span>
                                                    </p>
                                                    {assignment.reminderEnabled && (
                                                        <p className="text-sm text-gray-600 flex items-center gap-1">
                                                            <Bell />
                                                            <span className="font-medium">Reminder:</span> {assignment.reminderTime}
                                                        </p>
                                                    )}
                                                </div>
                                            </div>
                                            <div className="flex gap-2">
                                                <button
                                                    onClick={() => handleEdit(assignment)}
                                                    className="p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition"
                                                >
                                                    <Edit2 />
                                                </button>
                                                <button
                                                    onClick={() => handleDelete(assignment.id)}
                                                    className="p-2 text-red-600 hover:bg-red-50 rounded-lg transition"
                                                >
                                                    <Trash2 />
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                ))
                            )}
                        </div>
                    </div>
                </div>
            );
        }

        ReactDOM.render(<HomeworkTracker />, document.getElementById('root'));
    </script>
</body>
</html>
